{% extends 'myshow/main.html' %}
{% load static %}
{% block content %}
    {% for movie in product %}
    <div class="thumbnail border border-warning" style="width: 100%; height: 100%; display: flex">
            <div class="flexone" style="flex:4; padding:5px">
            <img class="container" src={{movie.imageURL}}>
                <h4 style="padding: 10px"> {{movie.movie_name}}</h4>
            </div>
            <div class="flextwo" style="flex:8">
                <h3 style="color: red"> About movie</h3>
                <p style="font-size: 15px"> {{movie.description}}</p>
                <h3 style="color: red"> </h3>
                <p style="font-size: 15px; display: inline; width:auto; height:auto; border: 1px solid blue; background-color: grey; padding:5px" > {{movie.movie_type}} * {{movie.languages}} * {{movie.release_date}}</p>
                <a href="{% url 'myshow:add_review' movie.id %}">Ratings {{movie.rating}}({{ movie.countreview}} )></a>
                <button class="btn" style="height:40px;width:auto; background-color:red"> <a href="{% url 'myshow:cart' movie.id %}"> Book tickets Now </a> </button>

            </div>

    </div>

    <h3> Reviews ({{movie.countreview}}) </h3>
    {% endfor %}

        <div class="row border border-danger">
            <div class="col-md-6">
                <div class="product-reviews">
                    {% for r in reviews %}
                    <ul>
                    <div class="single-review">
                        <div class="review-heading" style="display:flex">
                            <div><a href="#"><i class="fa fa-user-o"></i> Name: {{ r.user }}</a> </div>
                            <div><a href="#"><i class="fa fa-clock-o" style="display: inline; margin:70px"></i> Ratings: {{ r.rating}}/10</a></div>

                        </div>
                        <div class="review-body">
                            <p>{{ r.comment }}</p>

                            <div><a href="#"><i class="fa fa-clock-o" style="right:70px"></i> Updated on: {{ r.created_at}}</a></div>
                        </div>
                    </div>
                    </ul>
                    {% endfor %}
                </div>
            </div>
               <button class="btn" id='addreview1' style="height:40px; width:auto; background-color:red; margin:130px;" onclick="showreview()"> Write review?</button>
            <div class="col-md-6" id='writereview1' style="display: none">
                <h4 class="text-uppercase">Write Your Review</h4>
                {% if messages %}
                {% for message in messages %}
                <div class="alert alert-{{message.tags}}" role="alert">
                    {{ message }}
                </div>
                {% endfor %}
                {% endif %}
                {% for movie in product %}
                 <form action="{% url 'myshow:add_review' movie.id %}" method="POST">
                {% csrf_token %}
                <label for="comment">Review</label>
                <textarea name="comment" id="comment" cols="30" rows="5" class="form-control"></textarea>

                <label for="rating">Rating</label>
                <input type="range" id="rangeInput"
                    name="rating" min="0" max="10" value="0" step="1"
                    oninput="amount.value=rangeInput.value">

         <output name="amount" id="amount" for="rangeInput">0</output>

                <br>

                    {% if user.id is not None %}
                <input type="submit" class="btn btn-danger"  id="submitreview" onclick="showaddreview()" value="Add Review">

                    {% else %}
                    You must be logged in to post a review
                    {% endif %}
                 {% endfor %}

            </form>


            </div>
        </div>
</div>
</div>
</div>
</div>
<br>
<br>
<br>
<br>
<br>

<script>
function showreview(){
          document.getElementById("writereview1").style.display='block';
          document.getElementById("addreview1").style.display='none';
          };
function showaddreview(){
          document.getElementById("addreview1").style.display='block';
          document.getElementById("writereview1").style.display='none';
          };
</script>

{% endblock content %}





